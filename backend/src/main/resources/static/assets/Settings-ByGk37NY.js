import{r as a,u as j,j as e,l as N}from"./index-Ck_XVGQH.js";import{F as k}from"./XMarkIcon-CDuiC9Ab.js";function v({title:n,titleId:i,...l},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":i},l),n?a.createElement("title",{id:i},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const P=a.forwardRef(v);function C(){const{currentUser:n,changePassword:i,loading:l}=j(),[r,w]=a.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,o]=a.useState({type:"",text:""}),[h,d]=a.useState(!1),[s,g]=a.useState({broadcastStart:!0,broadcastReminders:!0,newSchedule:!1,systemUpdates:!0});a.useEffect(()=>{if(h){const t=setTimeout(()=>{d(!1)},2e3);return()=>clearTimeout(t)}},[h]);const b=t=>{const{name:x,value:u}=t.target;w({...r,[x]:u})},m=t=>{g({...s,[t]:!s[t]})},f=async t=>{var x,u;if(t.preventDefault(),o({type:"",text:""}),r.newPassword!==r.confirmPassword){o({type:"error",text:"New passwords do not match!"}),d(!0);return}if(r.newPassword.length<6){o({type:"error",text:"New password must be at least 6 characters long"}),d(!0);return}try{n&&n.id?(await i(n.id,{currentPassword:r.currentPassword,newPassword:r.newPassword}),o({type:"success",text:"Password changed successfully!"}),d(!0),w({currentPassword:"",newPassword:"",confirmPassword:""})):(o({type:"error",text:"User information not available. Please try again later."}),d(!0))}catch(p){o({type:"error",text:((u=(x=p.response)==null?void 0:x.data)==null?void 0:u.message)||"Failed to change password. Please verify your current password is correct."}),d(!0)}},y=t=>{t.preventDefault(),console.log("Notification settings submitted:",s),alert("Notification settings updated successfully!")};return e.jsxs("div",{className:"container mx-auto px-4",children:[h&&e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black opacity-50"}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full transform transition-all ${c.type==="success"?"border-l-4 border-green-500":"border-l-4 border-red-500"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`text-lg font-medium ${c.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:c.type==="success"?"Success":"Error"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:e.jsx(k,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:c.text})]})]}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center",children:"Settings"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-8",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:f,children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-200 dark:border-gray-700 flex items-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2 text-gray-500 dark:text-gray-400"}),"Change Password"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),e.jsx("input",{type:"password",name:"currentPassword",id:"currentPassword",value:r.currentPassword,onChange:b,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:"password",name:"newPassword",id:"newPassword",value:r.newPassword,onChange:b,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),e.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",value:r.confirmPassword,onChange:b,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",required:!0})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:l,className:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white ${l?"bg-maroon-400 cursor-not-allowed":"bg-maroon-700 hover:bg-maroon-800"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-maroon-600`,children:l?"Updating...":"Update Password"})})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-8",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-200 dark:border-gray-700 flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-gray-500 dark:text-gray-400"}),"Notification Preferences"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Broadcast Start Alerts"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Get notified when a broadcast goes live"})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[e.jsx("input",{type:"checkbox",id:"broadcastStart",checked:s.broadcastStart,onChange:()=>m("broadcastStart"),className:"sr-only"}),e.jsx("label",{htmlFor:"broadcastStart",className:`block overflow-hidden h-6 rounded-full cursor-pointer ${s.broadcastStart?"bg-yellow-400":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`block h-6 w-6 rounded-full bg-white shadow transform transition-transform ${s.broadcastStart?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Broadcast Reminders"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Get reminders before scheduled broadcasts"})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[e.jsx("input",{type:"checkbox",id:"broadcastReminders",checked:s.broadcastReminders,onChange:()=>m("broadcastReminders"),className:"sr-only"}),e.jsx("label",{htmlFor:"broadcastReminders",className:`block overflow-hidden h-6 rounded-full cursor-pointer ${s.broadcastReminders?"bg-yellow-400":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`block h-6 w-6 rounded-full bg-white shadow transform transition-transform ${s.broadcastReminders?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"New Schedule Updates"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Get notified when new broadcasts are scheduled"})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[e.jsx("input",{type:"checkbox",id:"newSchedule",checked:s.newSchedule,onChange:()=>m("newSchedule"),className:"sr-only"}),e.jsx("label",{htmlFor:"newSchedule",className:`block overflow-hidden h-6 rounded-full cursor-pointer ${s.newSchedule?"bg-yellow-400":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`block h-6 w-6 rounded-full bg-white shadow transform transition-transform ${s.newSchedule?"translate-x-4":"translate-x-0"}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"System Updates"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Receive notifications about system updates and maintenance"})]}),e.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[e.jsx("input",{type:"checkbox",id:"systemUpdates",checked:s.systemUpdates,onChange:()=>m("systemUpdates"),className:"sr-only"}),e.jsx("label",{htmlFor:"systemUpdates",className:`block overflow-hidden h-6 rounded-full cursor-pointer ${s.systemUpdates?"bg-yellow-400":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`block h-6 w-6 rounded-full bg-white shadow transform transition-transform ${s.systemUpdates?"translate-x-4":"translate-x-0"}`})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-maroon-700 hover:bg-maroon-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-maroon-600",children:"Save Preferences"})})]})})})]})]})}export{C as default};
