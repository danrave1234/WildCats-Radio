import{r as l,g as u,h as D,j as e,i as Q,k as W,F as X,b as B}from"./index-5zlpEBiU.js";import{F as J}from"./UserGroupIcon-C7yupNrm.js";import{F as Z}from"./UserIcon-CD8NrUg1.js";const re=()=>{const[p,R]=l.useState([]),[v,h]=l.useState(!1),[k,g]=l.useState(null),[c,U]=l.useState(null),[Y,C]=l.useState(!1),[y,T]=l.useState(""),[f,i]=l.useState({totalUsers:0,totalDJs:0,totalListeners:0,totalBroadcasts:0,activeBroadcasts:0,scheduledBroadcasts:0}),[d,N]=l.useState("dashboard"),[n,O]=l.useState({username:"",email:"",role:"LISTENER",password:""}),[M,z]=l.useState([]),[m,L]=l.useState([]),[o,j]=l.useState({dayOfWeek:"MONDAY",scheduledStart:"",scheduledEnd:"",automatic:!0}),[w,S]=l.useState(!1),[b,F]=l.useState("MONDAY");l.useEffect(()=>{d==="users"&&$()},[d]),l.useEffect(()=>{const t=async()=>{try{const a=(await B.getLive()).data;z(a),i(A=>({...A,activeBroadcasts:a.length}));const x=(await B.getUpcoming()).data;i(A=>({...A,scheduledBroadcasts:x.length,totalBroadcasts:a.length+x.length}))}catch(s){console.error("Error fetching broadcasts:",s)}};if(d==="dashboard"||d==="broadcasts"){t();const s=setInterval(t,6e4);return()=>clearInterval(s)}},[d]),l.useEffect(()=>{const t=async()=>{try{const s=await u.getSchedules();L(s.data);const a=await u.getStatus();S(a.data),i(r=>({...r,serverStatus:a.data?"Online":"Offline"}))}catch(s){console.error("Error fetching server schedules:",s)}};if(d==="schedule"||d==="dashboard"){t();const s=setInterval(async()=>{try{const a=await u.getStatus();S(a.data),i(r=>({...r,serverStatus:a.data?"Online":"Offline"}))}catch(a){console.error("Error checking server status:",a)}},3e4);return()=>clearInterval(s)}},[d]);const $=async()=>{h(!0),g(null);try{const t=await D.getAllUsers();R(t.data);const s=t.data.filter(r=>r.role==="DJ").length,a=t.data.filter(r=>r.role==="LISTENER").length;i(r=>({...r,totalUsers:t.data.length,totalDJs:s,totalListeners:a}))}catch(t){console.error("Error fetching users:",t),g("Failed to fetch users. Please try again.")}finally{h(!1)}},P=t=>{U(t),T(t.role),C(!0)},H=async()=>{if(!(!c||!y)){h(!0);try{await D.updateUserRole(c.id,y),R(p.map(r=>r.id===c.id?{...r,role:y}:r)),C(!1),U(null);const t=p.map(r=>r.id===c.id?{...r,role:y}:r),s=t.filter(r=>r.role==="DJ").length,a=t.filter(r=>r.role==="LISTENER").length;i(r=>({...r,totalDJs:s,totalListeners:a}))}catch(t){console.error("Error updating user role:",t),g("Failed to update user role. Please try again.")}finally{h(!1)}}},E=t=>{const{name:s,value:a}=t.target;O({...n,[s]:a})},I=t=>{const{name:s,value:a}=t.target;j(r=>({...r,[s]:a}))},V=t=>{F(t.target.value),j(s=>({...s,dayOfWeek:t.target.value}))},q=async()=>{try{w?(await u.stopNow(),S(!1),console.log("Stopping server"),i(t=>({...t,serverStatus:"Offline"}))):(await u.startNow(),S(!0),console.log("Starting server"),i(t=>({...t,serverStatus:"Online"})))}catch(t){console.error("Error toggling server:",t),alert("There was an error controlling the server. Please try again.")}},G=async t=>{t.preventDefault();try{if(!o.scheduledStart||!o.scheduledEnd){alert("Please enter both start and end times");return}const s=m.find(a=>a.dayOfWeek===o.dayOfWeek);if(s){const a={...s,scheduledStart:o.scheduledStart,scheduledEnd:o.scheduledEnd,automatic:o.automatic};await u.updateSchedule(s.id,a),L(m.map(r=>r.id===s.id?a:r)),console.log("Updated server schedule:",a),alert("Server schedule updated!")}else{const r=(await u.createSchedule({...o,automatic:!0})).data;L([...m,r]),console.log("Created server schedule:",r),alert("Server schedule created!")}j({dayOfWeek:b,scheduledStart:"",scheduledEnd:"",automatic:!0})}catch(s){console.error("Error saving server schedule:",s),alert("There was an error saving the schedule. Please try again.")}},_=async t=>{t.preventDefault(),h(!0),g(null);try{const s={name:n.username,email:n.email,password:n.password},r=(await D.register(s)).data;n.role!=="LISTENER"&&(await D.updateUserRole(r.id,n.role),r.role=n.role),R([...p,r]),O({username:"",email:"",role:"LISTENER",password:""}),i(x=>({...x,totalUsers:x.totalUsers+1,totalDJs:n.role==="DJ"?x.totalDJs+1:x.totalDJs,totalListeners:n.role==="LISTENER"?x.totalListeners+1:x.totalListeners})),alert("User created successfully!")}catch(s){console.error("Error creating user:",s),g("Failed to create user. Please try again.")}finally{h(!1)}},K=async t=>{try{await B.startTest(t),fetchLiveBroadcasts(),alert("Test broadcast started successfully")}catch(s){console.error("Error starting test broadcast:",s),alert("There was an error starting the test broadcast: "+s.message)}};return e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"md:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 mr-2 text-blue-600 dark:text-blue-400"}),"Admin Controls"]})}),e.jsxs("nav",{className:"p-2",children:[e.jsxs("button",{onClick:()=>N("dashboard"),className:`w-full text-left px-4 py-2 rounded-md flex items-center text-sm font-medium ${d==="dashboard"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Admin Overview"]}),e.jsxs("button",{onClick:()=>N("users"),className:`w-full text-left px-4 py-2 rounded-md flex items-center text-sm font-medium ${d==="users"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(J,{className:"h-5 w-5 mr-2"}),"User Management"]}),e.jsxs("button",{onClick:()=>N("broadcasts"),className:`w-full text-left px-4 py-2 rounded-md flex items-center text-sm font-medium ${d==="broadcasts"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(W,{className:"h-5 w-5 mr-2"}),"Broadcast Management"]}),e.jsxs("button",{onClick:()=>N("schedule"),className:`w-full text-left px-4 py-2 rounded-md flex items-center text-sm font-medium ${d==="schedule"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(X,{className:"h-5 w-5 mr-2"}),"Schedule Management"]})]})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[d==="dashboard"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"System Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-200",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-semibold text-blue-800 dark:text-blue-100",children:f.totalUsers})]}),e.jsx(J,{className:"h-10 w-10 text-blue-500 dark:text-blue-300"})]})}),e.jsx("div",{className:"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-200",children:"Total DJs"}),e.jsx("p",{className:"text-2xl font-semibold text-purple-800 dark:text-purple-100",children:f.totalDJs})]}),e.jsx(Z,{className:"h-10 w-10 text-purple-500 dark:text-purple-300"})]})}),e.jsx("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-200",children:"Total Broadcasts"}),e.jsx("p",{className:"text-2xl font-semibold text-green-800 dark:text-green-100",children:f.totalBroadcasts})]}),e.jsx(W,{className:"h-10 w-10 text-green-500 dark:text-green-300"})]})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Broadcasts"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[f.activeBroadcasts," Active"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Scheduled Broadcasts"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[f.scheduledBroadcasts," Scheduled"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Server Status"}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Online"})]})]})]})]}),d==="users"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"User Management"}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Create New User"}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",value:n.username,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsxs("select",{id:"role",name:"role",value:n.role,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",children:[e.jsx("option",{value:"LISTENER",children:"Listener"}),e.jsx("option",{value:"DJ",children:"DJ"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create User"})})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[k&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:e.jsx("p",{children:k})})]})]})}),v?e.jsxs("div",{className:"flex justify-center items-center py-10",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Loading users..."})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Username"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No users found"})}):p.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.name||t.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.role==="ADMIN"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":t.role==="DJ"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:t.role})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("button",{onClick:()=>P(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-200 mr-3",children:"Edit Role"}),e.jsx("button",{className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-200",children:"Delete"})]})]},t.id))})]})]})]}),d==="broadcasts"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Broadcast Management"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsxs("span",{className:"inline-flex items-center mr-2 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500 mr-1 animate-pulse"}),"LIVE"]}),"Currently Live Broadcasts"]}),M.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(t=>{var s;return e.jsx("div",{className:"bg-white dark:bg-gray-700 shadow rounded-lg p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["DJ: ",((s=t.createdBy)==null?void 0:s.name)||"Unknown DJ"]}),t.actualStart&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Started: ",new Date(t.actualStart).toLocaleString()]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:t.description})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500 mr-1 animate-pulse"}),"LIVE"]}),e.jsxs("div",{className:"mt-2 flex flex-col space-y-2",children:[e.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",onClick:()=>window.open(t.streamUrl,"_blank"),disabled:!t.streamUrl,children:t.streamUrl?"Open Stream":"No Stream URL"}),e.jsx("button",{className:"text-xs text-purple-600 dark:text-purple-400 hover:underline",onClick:()=>K(t.id),children:"Start Test Broadcast"})]})]})]})},t.id)})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No broadcasts are currently live"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Scheduled Broadcasts"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"View and manage upcoming scheduled broadcasts. You can also create new broadcast schedules."}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No scheduled broadcasts found"})})]})]}),d==="schedule"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Schedule Management"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden mb-8",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-200 dark:border-gray-700",children:"Server Schedule Management"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Server Status"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:w?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4 text-green-500 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Running"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4 text-red-500 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Stopped"]})})]}),e.jsx("button",{onClick:q,className:`px-4 py-2 rounded-md text-white font-medium ${w?"bg-red-600 hover:bg-red-700":"bg-yellow-500 hover:bg-yellow-600"}`,children:w?"Stop Server":"Start Server"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Weekly Schedule"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:m.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-3",children:["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"].map(t=>{const s=m.find(a=>a.dayOfWeek===t);return e.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.charAt(0)+t.slice(1).toLowerCase()})}),e.jsx("div",{className:"flex-1",children:s?e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.scheduledStart," - ",s.scheduledEnd]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:s.status==="RUNNING"?e.jsx("span",{className:"text-green-500",children:"Running"}):s.status==="SCHEDULED"?e.jsx("span",{className:"text-yellow-500",children:"Scheduled"}):e.jsx("span",{className:"text-red-500",children:"Off"})})]}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No schedule"})}),e.jsx("div",{className:"flex-none",children:e.jsx("button",{onClick:()=>{F(t),j(s?{dayOfWeek:t,scheduledStart:s.scheduledStart,scheduledEnd:s.scheduledEnd,automatic:!0}:{dayOfWeek:t,scheduledStart:"",scheduledEnd:"",automatic:!0})},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm",children:s?"Edit":"Add"})})]},t)})}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No schedules configured yet"})})]}),e.jsxs("form",{onSubmit:G,className:"mt-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:[m.find(t=>t.dayOfWeek===b)?"Edit":"Add"," Schedule for ",b.charAt(0)+b.slice(1).toLowerCase()]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dayOfWeek",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Day of Week"}),e.jsxs("select",{id:"dayOfWeek",name:"dayOfWeek",value:b,onChange:V,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",children:[e.jsx("option",{value:"MONDAY",children:"Monday"}),e.jsx("option",{value:"TUESDAY",children:"Tuesday"}),e.jsx("option",{value:"WEDNESDAY",children:"Wednesday"}),e.jsx("option",{value:"THURSDAY",children:"Thursday"}),e.jsx("option",{value:"FRIDAY",children:"Friday"}),e.jsx("option",{value:"SATURDAY",children:"Saturday"}),e.jsx("option",{value:"SUNDAY",children:"Sunday"})]})]}),e.jsxs("div",{className:"flex items-center mt-6",children:[e.jsx("input",{type:"checkbox",id:"automatic",name:"automatic",checked:!0,readOnly:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"automatic",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Automatic (server will start/stop according to schedule)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scheduledStart",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",name:"scheduledStart",id:"scheduledStart",value:o.scheduledStart,onChange:I,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"scheduledEnd",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),e.jsx("input",{type:"time",name:"scheduledEnd",id:"scheduledEnd",value:o.scheduledEnd,onChange:I,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.find(t=>t.dayOfWeek===b)?"Update":"Add"," Schedule"]})})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 shadow rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Upcoming Broadcasts"}),e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No broadcasts scheduled"})})]})]})]})})]})]}),Y&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsx("div",{className:"relative mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Update User Role"}),e.jsxs("div",{className:"mt-2 px-7 py-3",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Change role for user: ",(c==null?void 0:c.name)||(c==null?void 0:c.email)]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 text-left",children:"Role"}),e.jsxs("select",{id:"role",value:y,onChange:t=>T(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white p-2 border",children:[e.jsx("option",{value:"LISTENER",children:"Listener"}),e.jsx("option",{value:"DJ",children:"DJ"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),k&&e.jsx("div",{className:"mb-4 text-sm text-red-600 dark:text-red-400",children:k})]}),e.jsxs("div",{className:"flex justify-end space-x-3 px-4 py-3 bg-gray-50 dark:bg-gray-700 text-right sm:px-6 rounded-b-md",children:[e.jsx("button",{onClick:()=>{C(!1),U(null),g(null)},className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:v,className:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${v?"opacity-50 cursor-not-allowed":""}`,children:v?"Updating...":"Update Role"})]})]})})})]})};export{re as default};
